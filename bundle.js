!function(t){function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var e={};return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,e){"use strict";function i(t){t.preventDefault();var n=t.touches[0].clientX,e=t.touches[0].clientY,i=Math.floor(e/h.cellDimension),a=Math.floor(n/h.cellDimension);h.status[i][a]=!0,h.updateCanvas()}var a=function(){function t(t,n){var e=[],i=!0,a=!1,u=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(e.push(s.value),!n||e.length!==n);i=!0);}catch(t){a=!0,u=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw u}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=document.querySelector.bind(document),s=u("canvas"),o=s.getContext("2d");s.width=s.height=innerWidth,o.fillStyle="black";var r={MAINTAIN_VALUE:2,REBORN_VALUE:3,EVOLVE_TIME:200},c={generation:0},l={init:function(t,n){this.count={xCount:t,yCount:n},this.cellDimension=innerWidth/this.count.xCount;for(var e=0;e<n;e++){this.status[e]=[],this.nextStatus[e]=[];for(var i=0;i<t;i++)this.status[e][i]=!1,this.nextStatus[e][i]=!1}},changeStatus:function(){var t=this;this.init(this.count.xCount,this.count.yCount);for(var n=Math.floor(this.count.xCount/2),e=[],i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];u.forEach(function(t){var n=a(t,2),i=n[0],u=n[1];e.push(i),e.push(u)});var o=Math.max.apply(Math,e)-Math.min.apply(Math,e);u.forEach(function(e){var i=a(e,2),u=i[0],s=i[1];t.status[u-o+n+5][s-o+n+5]=!0}),setTimeout(this.start.bind(this),1e3)},updateCanvas:function(){o.clearRect(0,0,innerWidth,innerWidth);for(var t=0;t<this.count.yCount;t++)for(var n=0;n<this.count.xCount;n++)this.status[t][n]&&o.fillRect(this.cellDimension*n,this.cellDimension*t,this.cellDimension,this.cellDimension)},evolve:function(){for(var t=0;t<this.count.yCount;t++)for(var n=0;n<this.count.xCount;n++){var e=null,i=this.status;e=0===t?0===n?[i[t][n+1],i[t+1][n],i[t+1][n+1]]:n===this.count.xCount-1?[i[t][n-1],i[t+1][n-1],i[t+1][n]]:[i[t][n-1],i[t][n+1],i[t+1][n-1],i[t+1][n],i[t+1][n+1]]:t===this.count.yCount-1?0===n?[i[t-1][n],i[t-1][n+1],i[t][n+1]]:n===this.count.xCount-1?[i[t-1][n-1],i[t-1][n],i[t][n-1]]:[i[t-1][n-1],i[t-1][n],i[t-1][n+1],i[t][n-1],i[t][n+1]]:0===n?[i[t-1][n],i[t-1][n+1],i[t][n+1],i[t+1][n],i[t+1][n+1]]:n===this.count.xCount-1?[i[t-1][n-1],i[t-1][n],i[t][n-1],i[t+1][n-1],i[t+1][n]]:[i[t-1][n-1],i[t-1][n],i[t-1][n+1],i[t][n-1],i[t][n+1],i[t+1][n-1],i[t+1][n],i[t+1][n+1]],this.judge(t,n,e)}this.updateStatus(),this.updateCanvas()},judge:function(t,n,e){var i=this.status[t][n],a=e.reduce(function(t,n){return t+n});i?a<2?this.nextStatus[t][n]=!1:2===a||3===a?this.nextStatus[t][n]=i:a>3&&(this.nextStatus[t][n]=!1):3===a&&(this.nextStatus[t][n]=!0)},updateStatus:function(){for(var t=0,n=0;n<this.count.yCount;n++)for(var e=0;e<this.count.xCount;e++)this.status[n][e]=this.nextStatus[n][e],this.status[n][e]&&t++;c.generation++,u("p.generation").textContent="Generation: "+c.generation,u("p.livingCells").textContent="Living cells count: "+t,t||(this.pause(),u("p.generation").textContent="dead end!")},start:function(){clearTimeout(this.timer),this.timer=setInterval(this.evolve.bind(this),r.EVOLVE_TIME)},pause:function(){clearTimeout(this.timer)}},h=Object.create(l);h.status=[],h.nextStatus=[],h.count=h.cellDimension=null,h.init(30,30),u("button.start").addEventListener("click",function(t){h.start()}),u("button.pause").addEventListener("click",function(t){h.pause()}),u("button.clear").addEventListener("click",function(t){h.pause(),h.init(h.count.xCount,h.count.yCount),h.updateCanvas()}),u("input.evolveTime").addEventListener("change",function(t){r.EVOLVE_TIME=Number(t.target.value)}),u("select#size").addEventListener("change",function(t){var n=Number(t.target.value);h.pause(),h.init(n,n),h.updateCanvas()}),u("select#size").value="30",u("select#mode").addEventListener("change",function(t){switch(h.pause(),c.generation=0,Number(t.target.value)){case 0:h.init(h.count.xCount,h.count.yCount),s.addEventListener("touchstart",function(t){i(t)});break;case 1:h.changeStatus([1,2],[2,4],[3,1],[3,2],[3,5],[3,6],[3,7]);break;case 2:h.changeStatus([2,2],[2,3],[3,2],[3,3],[4,4],[4,5],[5,4],[5,5]);break;case 3:h.changeStatus([1,7],[2,1],[2,2],[3,2],[3,6],[3,7],[3,8]);break;case 4:h.changeStatus([1,1],[1,2],[1,3],[2,1],[2,2],[2,3],[3,1],[3,2],[3,3],[4,4],[4,5],[4,6],[5,4],[5,5],[5,6],[6,4],[6,5],[6,6]);break;case 5:h.changeStatus([1,2],[1,8],[2,1],[2,3],[2,7],[2,9],[3,1],[3,4],[3,6],[3,9],[4,3],[4,7],[5,3],[5,4],[5,6],[5,7]);case 6:h.changeStatus([1,3],[1,4],[1,5],[2,2],[2,6],[3,1],[3,7],[4,1],[4,7],[5,4],[6,2],[6,6],[7,3],[7,4],[7,5],[8,4],[11,5],[11,6],[11,7],[12,5],[12,6],[12,7],[13,4],[13,8],[15,3],[15,4],[15,8],[15,9])}h.updateCanvas()}),s.addEventListener("touchstart",function(t){i(t)}),s.addEventListener("touchmove",function(t){i(t)}),u("div.guide span").addEventListener("click",function(t){u("div.guide").style.display="none";var n=u("input#showAgain").checked;n&&(localStorage.notShowAgain="true")}),localStorage.notShowAgain||(u("div.guide").style.display="block"),u("div.rules span").addEventListener("click",function(t){var n=u("div.rules"),e=1e3*parseFloat(getComputedStyle(n).transitionDuration);n.style.top="10vw",n.style.opacity=0,setTimeout(function(){n.style.display="none"},e)}),u("div.rules").addEventListener("click",function(t){u("div.rules span").click()}),u("div.rulesTrigger").addEventListener("click",function(t){var n=u("div.rules");n.style.display="block",setTimeout(function(){n.style.opacity=1,n.style.top="5vw"},50)})}]);